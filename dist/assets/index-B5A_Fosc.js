var ae=Object.defineProperty;var oe=(e,t,r)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var R=(e,t,r)=>oe(e,typeof t!="symbol"?t+"":t,r);import{r as L,g as ce,a as ie}from"./vendor-BJsqeLoe.js";function le(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var b={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k;function ue(){if(k)return S;k=1;var e=L(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(i,f,u){var d,m={},h=null,p=null;u!==void 0&&(h=""+u),f.key!==void 0&&(h=""+f.key),f.ref!==void 0&&(p=f.ref);for(d in f)a.call(f,d)&&!o.hasOwnProperty(d)&&(m[d]=f[d]);if(i&&i.defaultProps)for(d in f=i.defaultProps,f)m[d]===void 0&&(m[d]=f[d]);return{$$typeof:t,type:i,key:h,ref:p,props:m,_owner:s.current}}return S.Fragment=r,S.jsx=c,S.jsxs=c,S}var D;function fe(){return D||(D=1,b.exports=ue()),b.exports}var n=fe(),l=L();const de=ce(l),he=le({__proto__:null,default:de},[l]);var E={},$;function me(){if($)return E;$=1;var e=ie();return E.createRoot=e.createRoot,E.hydrateRoot=e.hydrateRoot,E}var pe=me();function ve(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,a,s,o,c=[],i="",f=e.split("/");for(f[0]||f.shift();s=f.shift();)r=s[0],r==="*"?(c.push(r),i+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(a=s.indexOf("?",1),o=s.indexOf(".",1),c.push(s.substring(1,~a?a:~o?o:s.length)),i+=~a&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(i+=(~a?"?":"")+"\\"+s.substring(o))):i+="/"+s;return{keys:c,pattern:new RegExp("^"+i+(t?"(?=$|/)":"/?$"),"i")}}var w={exports:{}},_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T;function ge(){if(T)return _;T=1;var e=L();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,o=e.useLayoutEffect,c=e.useDebugValue;function i(m,h){var p=h(),j=a({inst:{value:p,getSnapshot:h}}),g=j[0].inst,v=j[1];return o(function(){g.value=p,g.getSnapshot=h,f(g)&&v({inst:g})},[m,p,h]),s(function(){return f(g)&&v({inst:g}),m(function(){f(g)&&v({inst:g})})},[m]),c(p),p}function f(m){var h=m.getSnapshot;m=m.value;try{var p=h();return!r(m,p)}catch{return!0}}function u(m,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:i;return _.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,_}var q;function xe(){return q||(q=1,w.exports=ge()),w.exports}var je=xe();const Se=he.useInsertionEffect,ye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ee=ye?l.useLayoutEffect:l.useEffect,Ce=Se||Ee,G=e=>{const t=l.useRef([e,(...r)=>t[0](...r)]).current;return Ce(()=>{t[0]=e}),t[1]},Re="popstate",I="pushState",F="replaceState",be="hashchange",K=[Re,I,F,be],we=e=>{for(const t of K)addEventListener(t,e);return()=>{for(const t of K)removeEventListener(t,e)}},V=(e,t)=>je.useSyncExternalStore(we,e,t),_e=()=>location.search,Ne=({ssrSearch:e=""}={})=>V(_e,()=>e),U=()=>location.pathname,Pe=({ssrPath:e}={})=>V(U,e?()=>e:U),Oe=(e,{replace:t=!1,state:r=null}={})=>history[t?F:I](r,"",e),Le=(e={})=>[Pe(e),Oe],H=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[H]>"u"){for(const e of[I,F]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),a=new Event(e);return a.arguments=arguments,dispatchEvent(a),r}}Object.defineProperty(window,H,{value:!0})}const Ie=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",W=(e="")=>e==="/"?"":e,Fe=(e,t)=>e[0]==="~"?e.slice(1):W(t)+e,Ae=(e="",t)=>Ie(M(W(e)),M(t)),M=e=>{try{return decodeURI(e)}catch{return e}},z={hook:Le,searchHook:Ne,parser:ve,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},X=l.createContext(z),y=()=>l.useContext(X),Z={},Q=l.createContext(Z),ke=()=>l.useContext(Q),A=e=>{const[t,r]=e.hook(e);return[Ae(e.base,t),G((a,s)=>r(Fe(a,e.base),s))]},ee=()=>A(y()),te=(e,t,r,a)=>{const{pattern:s,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",a),c=s.exec(r)||[],[i,...f]=c;return i!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((m,h)=>[m,f[h]])):c.groups;let d={...f};return u&&Object.assign(d,u),d})(),...a?[i]:[]]:[!1,null]},De=e=>te(y().parser,e,ee()[0]),$e=({children:e,...t})=>{var d,m;const r=y(),a=t.hook?z:r;let s=a;const[o,c]=((d=t.ssrPath)==null?void 0:d.split("?"))??[];c&&(t.ssrSearch=c,t.ssrPath=o),t.hrefs=t.hrefs??((m=t.hook)==null?void 0:m.hrefs);let i=l.useRef({}),f=i.current,u=f;for(let h in a){const p=h==="base"?a[h]+(t[h]||""):t[h]||a[h];f===u&&p!==u[h]&&(i.current=u={...u}),u[h]=p,p!==a[h]&&(s=u)}return l.createElement(X.Provider,{value:s,children:e})},J=({children:e,component:t},r)=>t?l.createElement(t,{params:r}):typeof e=="function"?e(r):e,Te=e=>{let t=l.useRef(Z);const r=t.current;return t.current=Object.keys(e).length!==Object.keys(r).length||Object.entries(e).some(([a,s])=>s!==r[a])?e:r},B=({path:e,nest:t,match:r,...a})=>{const s=y(),[o]=A(s),[c,i,f]=r??te(s.parser,e,o,t),u=Te({...ke(),...i});if(!c)return null;const d=f?l.createElement($e,{base:f},J(a,u)):J(a,u);return l.createElement(Q.Provider,{value:u,children:d})},qe=l.forwardRef((e,t)=>{const r=y(),[a,s]=A(r),{to:o="",href:c=o,onClick:i,asChild:f,children:u,className:d,replace:m,state:h,...p}=e,j=G(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(i==null||i(v),v.defaultPrevented||(v.preventDefault(),s(c,e)))}),g=r.hrefs(c[0]==="~"?c.slice(1):r.base+c,r);return f&&l.isValidElement(u)?l.cloneElement(u,{onClick:j,href:g}):l.createElement("a",{...p,onClick:j,href:g,className:d!=null&&d.call?d(a===c):d,children:u,ref:t})}),x=class x{constructor(){R(this,"STORAGE_KEY","favorites")}static getInstance(){return x.instance||(x.instance=new x),x.instance}getFavorites(){return JSON.parse(localStorage.getItem(this.STORAGE_KEY)||"[]")}saveFavorites(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}toggleFavorite(t,r){return t.includes(r)?t.filter(a=>a!==r):[...t,r]}};R(x,"instance");let N=x;const Ke={favorites:[],showFavorites:!1,toggleFavoriteScreen:()=>{},toggleFavorite:()=>{}},C=l.createContext(Ke);function Ue({children:e}){const t=N.getInstance(),[r,a]=l.useState([]),[s,o]=l.useState(!1);l.useEffect(()=>{a(t.getFavorites())},[]);const c=f=>{const u=t.toggleFavorite(r,f);a(u),t.saveFavorites(u)},i=f=>{o(f??!s)};return n.jsx(C.Provider,{value:{favorites:r,showFavorites:s,toggleFavoriteScreen:i,toggleFavorite:c},children:e})}function re({id:e,isHovered:t}){const{favorites:r,toggleFavorite:a}=l.useContext(C),s=()=>{a(e)},[o,c]=r.includes(e)?["Remove Character from favorites",t?"🤍":"❤️"]:["Add Character to favorites","♡"];return n.jsx(n.Fragment,{children:n.jsx("button",{className:"character-fav",onClick:s,"aria-label":`${o} button`,children:n.jsx("span",{role:"img","aria-label":o,children:c})})})}function He({title:e,url:t,id:r}){const[a,s]=l.useState(!1);return n.jsxs("div",{className:"character-wrapper",onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),children:[n.jsx(qe,{to:`/character/${r}`,className:"character-link",children:n.jsx("img",{loading:"lazy",alt:e,src:t})}),n.jsxs("div",{className:`character-presentation ${a?"hovered":""}`,children:[n.jsx("h4",{children:e}),n.jsx("div",{className:"favorite-button",children:n.jsx(re,{id:r,isHovered:a})})]})]})}function Me({characters:e}){return n.jsx("div",{className:"characters-list",children:e==null?void 0:e.map(t=>n.jsx(He,{title:t.name,url:t.image,id:t.id},t.id))})}function P(){return n.jsxs("div",{className:"lds-ring","data-testid":"spinner",children:[n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{})]})}const Je=()=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"20",height:"20",viewBox:"0 0 50 50","data-testid":"search-icon","aria-label":"Search Icon",children:n.jsx("path",{d:"M 21 3 C 11.621094 3 4 10.621094 4 20 C 4 29.378906 11.621094 37 21 37 C 24.710938 37 28.140625 35.804688 30.9375 33.78125 L 44.09375 46.90625 L 46.90625 44.09375 L 33.90625 31.0625 C 36.460938 28.085938 38 24.222656 38 20 C 38 10.621094 30.378906 3 21 3 Z M 21 5 C 29.296875 5 36 11.703125 36 20 C 36 28.296875 29.296875 35 21 35 C 12.703125 35 6 28.296875 6 20 C 6 11.703125 12.703125 5 21 5 Z"})}),Be=({onSearchChange:e,filterWord:t})=>{const r=s=>{e(s.target.value)},a=s=>{s.key==="Enter"&&(s.preventDefault(),e(t,!0))};return n.jsx("form",{role:"search","aria-labelledby":"search-label",onSubmit:s=>s.preventDefault(),children:n.jsxs("div",{className:"search",children:[n.jsx(Je,{}),n.jsx("input",{className:"search-input",type:"search",placeholder:"SEARCH A CHARACTER",value:t,onChange:r,onKeyDown:a,"aria-label":"Search for a character"})]})})},Ye={API_URL:"https://dragonball-api.com/api/characters"};async function O(e={}){try{const{characterId:t,limit:r=50,...a}=e,s=new URL(Ye.API_URL+(t?`/${t}`:"")),o=new URLSearchParams;Object.entries({...a,limit:r}).forEach(([f,u])=>{u!==void 0&&o.append(f,u.toString())}),s.search=o.toString();const i=await(await fetch(s)).json();return"items"in i?i.items:i}catch(t){throw console.error("Error fetching character:",t),t}}const Ge=24*60*60*1e3;function se(e){const t=localStorage.getItem(e),r=localStorage.getItem(`${e}_timestamp`);if(t&&r){if(Date.now()-parseInt(r,10)<Ge)return JSON.parse(t);localStorage.removeItem(e),localStorage.removeItem(`${e}_timestamp`)}return null}function ne(e,t){localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem(`${e}_timestamp`,Date.now().toString())}const Y="characters_cache";function Ve(){const[e,t]=l.useState([]),[r,a]=l.useState(""),[s,o]=l.useState(!1),c=l.useRef(null);l.useEffect(()=>{const u=se(Y);if(u){t(u),o(!1);return}o(!0),O().then(d=>{t(d),ne(Y,d),o(!1)})},[]);const i=l.useCallback(u=>{o(!0),O({name:u}).then(d=>{t(d),o(!1)})},[]),f=l.useCallback((u,d=!1)=>{a(u),c.current&&clearTimeout(c.current),d||u.length===0?i(u):c.current=setTimeout(()=>i(u),2e3)},[i]);return{characters:e,handleFilter:f,filterWord:r,setFilterWord:a,loading:s,fetchCharactersByName:i}}function We(){const{characters:e,loading:t,filterWord:r,handleFilter:a}=Ve(),{showFavorites:s,favorites:o}=l.useContext(C),c=l.useMemo(()=>s?e==null?void 0:e.filter(i=>o.includes(i.id)):e,[e,s,o]);return n.jsxs("div",{style:{padding:"0 50px"},children:[n.jsxs("div",{className:"search-wrapper",children:[n.jsx(Be,{onSearchChange:a,filterWord:r}),n.jsxs("span",{children:[c.length," RESULTS"]})]}),n.jsx("div",{className:"App-main",children:n.jsx("div",{className:"App-results",children:t&&e.length===0?n.jsx(P,{}):n.jsxs(n.Fragment,{children:[n.jsx(Me,{characters:c}),t&&n.jsx(P,{})]})})})]})}const ze="character_cache_",Xe=e=>{const[t,r]=l.useState(null),[a,s]=l.useState(!0);return l.useEffect(()=>{if(e){const o=`${ze}${e}`,c=se(o);if(c){r(c),s(!1);return}O({characterId:e}).then(i=>{r(i),ne(o,i),s(!1)}).catch(()=>{s(!1)})}},[e]),{characters:t,loading:a}},Ze=({character:e})=>{var t,r;return e?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"single-character-wrapper",children:[n.jsx("div",{className:"character-image",children:n.jsx("img",{src:e.image,alt:e.name})}),n.jsxs("div",{className:"character-desc",children:[n.jsxs("div",{className:"character-title",children:[n.jsx("h3",{children:e.name}),n.jsx(re,{id:e.id,isHovered:!1})]}),n.jsx("p",{children:e.description})]})]}),(t=e==null?void 0:e.transformations)!=null&&t.length?n.jsxs("div",{className:"comics-wrapper",children:[n.jsx("h2",{children:"Transformations"}),n.jsx("div",{className:"transformations-list",children:(r=e.transformations)==null?void 0:r.map(a=>n.jsxs("div",{className:"transformations",children:[n.jsx("div",{className:"img-wrapper",children:n.jsx("img",{src:a.image,alt:a.name})}),n.jsx("p",{className:"transformation-title",children:a.name}),n.jsxs("p",{children:["KI: ",a.ki]})]},a.id))})]}):n.jsx(n.Fragment,{})]}):n.jsx("div",{children:"Character not found"})},Qe=()=>{const[,e]=De("/character/:id"),{characters:t,loading:r}=Xe(e==null?void 0:e.id);return r?n.jsx(P,{}):n.jsx(Ze,{character:t})},et="/assets/logo-C10h8Wpi.png",tt=()=>{const{favorites:e,toggleFavoriteScreen:t}=l.useContext(C),[,r]=ee(),a=()=>{t(!1),r("/")},s=()=>{t(),r("/")};return n.jsxs("div",{className:"navbar",children:[n.jsx("button",{className:"nav-logo",onClick:a,children:n.jsx("img",{src:et,alt:"dragon-ball-logo",className:"logo"})}),n.jsx("div",{className:"nav-items",children:n.jsxs("span",{className:"fav-navbar",onClick:s,"aria-label":`Favorites: ${e.length} items`,children:["❤️ ",e.length]})})]})};function rt(){return n.jsx(Ue,{children:n.jsxs("div",{className:"App",children:[n.jsx(tt,{}),n.jsx(B,{path:"/",component:We}),n.jsx(B,{path:"/character/:id",component:Qe})]})})}pe.createRoot(document.getElementById("root")).render(n.jsx(l.StrictMode,{children:n.jsx(rt,{})}));
